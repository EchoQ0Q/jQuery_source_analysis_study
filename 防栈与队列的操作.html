<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>防栈与队列的操作</title>
</head>
<body>
	
	<ul id="wrapper">
		<li></li>
		<li></li>
		<li></li>
	</ul>
	<script>
		var aQuery = function(selector){
			return new aQuery.fn.init(selector);
		}

		aQuery.fn = aQuery.prototype = {
			name: 'Echo',
			init: function(selector){
				this.selector = selector;
				var list = document.querySelectorAll(selector);
				for(var i=0;i<list.length;i++){
					this[i] = list[i];
				}
				return this;
			}
		}

		$$ = aQuery.fn.init.prototype = aQuery.fn;

		aQuery.extend = aQuery.fn.extend = function(){
			var target = arguments[0] || {},
				len = arguments.length,
				i = 1;
			if(len == i){
				target = this;
				i--;
			}
			for(;i<len;i++){
				if((option = arguments[i]) != null){
					for(var name in option){
						copy = option[name];
						target[name] = copy;
					}
				}
			}
			return target;
		} 
		aQuery.fn.extend({
			setName: function(name){
				this.name = name;
				return this;
			},
			getName: function(){
				alert(this.name);
				return this;
			},
			get: function(num){
				if(num != null){
					return (num<0 ? this[num+this.length] : this[num]);
				}else{
					return [].slice.call(this);
				}
			}
		})

		aQuery().setName('Echo').getName();
		alert(aQuery('li').get(1).textContent);
	</script>
</body>
</html>